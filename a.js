let e,t,l,n,i,o=document,r=o.body,c=e=>o.createElement(e),f=Math;r.innerHTML="",r.style.textAlign="center",r.style.font="14pt monospace";let s=c("canvas");s.width=s.height=200,s.style.imageRendering="crisp-edges",r.append(s),r.append(c("br"));let d=s.getContext("2d");const p=[{c:"KeyW",t:"^",v:[0,-1]},{c:"KeyA",t:"<",v:[-1,0]},{c:"KeyS",t:"v",v:[0,1]},{c:"KeyD",t:">",v:[1,0]}];for(let e=0;e<p.length;e++){let t=p[e],l=c("button");l.style.width=l.style.height="67.3px",l.append(t.t),l.onclick=()=>{i.push(t.v)},r.append(l),0==e&&(l.style.marginTop="1rem",r.append(c("br")))}r.onkeydown=e=>{for(let t=0;t<p.length;t++){let l=p[t];if(e.code==l.c){i.push(l.v);return}}};let a=c("div");function y(){e=[[4,4]],l=0,n=0,i=[],g(),a.innerText=`Score: ${e.length-1}`}function g(){for(;;){let l=f.floor(10*f.random()),n=f.floor(10*f.random());if(!e.some(e=>JSON.stringify(e)==JSON.stringify([l,n]))){t=[l,n];break}}}a.style.marginTop="1rem",a.append(0),r.append(a),y(),setInterval(()=>{if(i.length>0){let e=i.shift();l==e[0]&&n==e[1]||-l==e[0]&&-n==e[1]||(l=e[0],n=e[1])}if(0!=l||0!=n){let i=structuredClone(e[0]);i[0]=(i[0]+l)%10,i[0]=i[0]>=0?i[0]:9,i[1]=(i[1]+n)%10,i[1]=i[1]>=0?i[1]:9,e.unshift(i);let o=JSON.stringify(i);o==JSON.stringify(t)?(g(),a.innerText=`Score: ${e.length-1}`):e.pop(),e.slice(1).some(e=>o==JSON.stringify(e))&&y()}d.fillStyle=r.style.background="#24273a",d.fillRect(0,0,s.width,s.height),s.style.border="1px solid"+(d.fillStyle=a.style.color="#cad3f5");for(let t=0;t<e.length;t++){let l=e[t],n=e[t-1];if(t-1<0){d.fillRect(20*l[0]+1,20*l[1]+1,18,18);continue}let i=n[0]-l[0],o=n[1]-l[1];f.abs(i)>f.abs(o)?-1==i||i>1?d.fillRect(20*l[0]-1,20*l[1]+1,20,18):d.fillRect(20*l[0]+1,20*l[1]+1,20,18):-1==o||o>1?d.fillRect(20*l[0]+1,20*l[1]-1,18,20):d.fillRect(20*l[0]+1,20*l[1]+1,18,20)}d.fillStyle="#ed8796";let o=20*t[0],c=20*t[1];d.fillRect(o,c,20,20)},500);
